#!/bin/bash

# Language Mirror Bot - —Å–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞
# –≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞

# –ü—Ä–æ–≤–µ—Ä–∫–∞ TELEGRAM_TOKEN
if [ -z "$TELEGRAM_TOKEN" ]; then
    echo "‚ö†Ô∏è  –û–®–ò–ë–ö–ê: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è TELEGRAM_TOKEN –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
    echo "–ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω —É @BotFather –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ, –Ω–∞–ø—Ä–∏–º–µ—Ä:"
    echo "export TELEGRAM_TOKEN=your_token_here"
    exit 1
fi

# –ü—Ä–æ–≤–µ—Ä–∫–∞ OpenRouter API (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
if [ -z "$OPENROUTER_API_KEY" ]; then
    echo "‚ö†Ô∏è  –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï: –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è OPENROUTER_API_KEY –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞"
    echo "–ë–æ—Ç –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö —à–∞–±–ª–æ–Ω–æ–≤, –±–µ–∑ AI"
    echo "–î–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è AI –ø–æ–ª—É—á–∏—Ç–µ –∫–ª—é—á –Ω–∞ https://openrouter.ai/keys"
    echo "–ó–∞—Ç–µ–º —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ: export OPENROUTER_API_KEY=your_key_here"
    read -p "–ü—Ä–æ–¥–æ–ª–∂–∏—Ç—å –±–µ–∑ AI? (y/n): " confirm
    if [ "$confirm" != "y" ]; then
        exit 1
    fi
    echo "–ü—Ä–æ–¥–æ–ª–∂–∞–µ–º –≤ —Ä–µ–∂–∏–º–µ —à–∞–±–ª–æ–Ω–æ–≤..."
else
    echo "‚úÖ OpenRouter API –∫–ª—é—á –Ω–∞–π–¥–µ–Ω"
fi

# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –Ω–∞—Å –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install -q pytelegrambotapi

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
echo "ü§ñ –ó–∞–ø—É—Å–∫ Language Mirror Bot..."
echo "--------------------------------------"
python run_telegram_bot.py

# –í —Å–ª—É—á–∞–µ –æ—à–∏–±–∫–∏, –≤—ã–≤–æ–¥–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ
if [ $? -ne 0 ]; then
    echo "‚ùå –í–æ–∑–Ω–∏–∫–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç–∞"
    echo "–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤—ã—à–µ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫"
    exit 1
fi