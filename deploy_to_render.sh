#!/bin/bash

echo "=== –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ Language Mirror Bot –Ω–∞ Render ==="

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π –¥–ª—è –∫–æ–º–º–∏—Ç–∞ –≤ git
if git status --porcelain | grep -q .; then
    # –ï—Å–ª–∏ –µ—Å—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è, –¥–µ–ª–∞–µ–º commit –∏ push (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω Git)
    read -p "–ù–∞–π–¥–µ–Ω—ã –Ω–µ–∑–∞–∫–æ–º–º–∏—á–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è. –•–æ—Ç–∏—Ç–µ —Å–¥–µ–ª–∞—Ç—å commit –∏ push? (y/n): " do_commit
    if [ "$do_commit" = "y" ]; then
        read -p "–í–≤–µ–¥–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–æ–º–º–∏—Ç–∞: " commit_message
        git add .
        git commit -m "$commit_message"
        git push
        echo "‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏—è –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π"
    fi
fi

# –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–ø—Ä–æ—Å –Ω–∞ –¥–µ–ø–ª–æ–π –≤ Render
echo "üöÄ –ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–ø–ª–æ—è –Ω–∞ Render..."
python trigger_render_deploy.py

echo "‚è± –î–µ–ø–ª–æ–π –∑–∞–ø—É—â–µ–Ω! Deployment URL: $WEBHOOK_URL"
echo "‚ÑπÔ∏è –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –æ–±—ã—á–Ω–æ –∑–∞–Ω–∏–º–∞–µ—Ç 1-2 –º–∏–Ω—É—Ç—ã"